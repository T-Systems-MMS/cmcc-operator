# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: coremediacontentclouds.cmcc.tsystemsmms.com
spec:
  group: cmcc.tsystemsmms.com
  names:
    kind: CoreMediaContentCloud
    plural: coremediacontentclouds
    shortNames:
    - cmcc
    - coremedia
    singular: coremediacontentcloud
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.error
      name: ERROR
      type: string
    - jsonPath: .status.milestone
      name: MILESTONE
      type: string
    name: v1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              comment:
                description: An arbitrary comment; can be used to force an update
                  to the object
                type: string
              components:
                description: "List of components (CMS, Solr, CAE, etc.)"
                items:
                  properties:
                    type:
                      description: Type of the component
                      type: string
                    kind:
                      description: "Sub-type ('cms' or 'mls', or 'master' and 'replica',\
                        \ or 'preview' and 'live')"
                      type: string
                    name:
                      description: Name to be used for k8s objects
                      type: string
                    args:
                      description: Args for the main pod container
                      items:
                        type: string
                      type: array
                    env:
                      description: Additional environment variables
                      items:
                        properties:
                          name:
                            type: string
                          value:
                            type: string
                          valueFrom:
                            properties:
                              configMapKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                  optional:
                                    type: boolean
                                type: object
                              fieldRef:
                                properties:
                                  apiVersion:
                                    type: string
                                  fieldPath:
                                    type: string
                                type: object
                              resourceFieldRef:
                                properties:
                                  containerName:
                                    type: string
                                  divisor:
                                    anyOf:
                                    - type: integer
                                    - type: string
                                    x-kubernetes-int-or-string: true
                                  resource:
                                    type: string
                                type: object
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                  optional:
                                    type: boolean
                                type: object
                            type: object
                        type: object
                      type: array
                    extra:
                      additionalProperties:
                        type: string
                      description: Extra parameters (depends on component)
                      type: object
                    image:
                      description: Image for main pod' main container
                      properties:
                        registry:
                          description: Image registry (default 'coremedia')
                          type: string
                        repository:
                          description: Image repository (default differs between components)
                          type: string
                        tag:
                          description: Image tag (default 'latest')
                          type: string
                        pullPolicy:
                          description: Image pull policy (default 'IfNotPresent')
                          type: string
                      type: object
                    milestone:
                      description: Make available with this milestone
                      enum:
                      - Created
                      - DatabasesReady
                      - ContentServerReady
                      - ManagementReady
                      - Ready
                      - Never
                      - milestone
                      type: string
                  type: object
                type: array
              defaults:
                description: Default values for components
                properties:
                  curlImage:
                    description: Docker image with curl available
                    type: string
                  image:
                    description: Defaults for the image specification
                    properties:
                      registry:
                        description: Image registry (default 'coremedia')
                        type: string
                      repository:
                        description: Image repository (default differs between components)
                        type: string
                      tag:
                        description: Image tag (default 'latest')
                        type: string
                      pullPolicy:
                        description: Image pull policy (default 'IfNotPresent')
                        type: string
                    type: object
                  ingressDomain:
                    description: Default domain name for Ingresses
                    type: string
                  insecureDatabasePassword:
                    description: "Use this password for all database accounts, instead\
                      \ of a random one."
                    type: string
                  resources:
                    description: Default resource declarations
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          x-kubernetes-int-or-string: true
                        type: object
                    type: object
                  namePrefix:
                    description: Prefix resources with this name plus '-'. Empty string
                      means no prefix
                    type: string
                  previewHostname:
                    description: "Hostname of the preview CAE. If short, will be prefixed\
                      \ with the prefix and the ingressDomain appended"
                    type: string
                  storageClass:
                    description: Name of StorageClass to be used for PersistentVolumeClaims
                    type: string
                  studioHostname:
                    description: "Hostname of the Studio. If short, will be prefixed\
                      \ with the prefix and the ingressDomain appended"
                    type: string
                  servletNames:
                    description: List of servlets the CAE serves
                    items:
                      type: string
                    type: array
                type: object
              licenseSecrets:
                description: Names of the secrets containing the license
                properties:
                  CMSLicense:
                    description: Name of the secret that has the license.zip for the
                      Content Management Server
                    type: string
                  MLSLicense:
                    description: Name of the secret that has the license.zip for the
                      Master Live Server
                    type: string
                  RLSLicense:
                    description: Name of the secret that has the license.zip for the
                      Replication Live Server
                    type: string
                type: object
              siteMappings:
                description: Site mappings
                items:
                  properties:
                    hostname:
                      description: Simple hostname of the site
                      type: string
                    fqdn:
                      description: Fully-qualified hostname of the site; defaults
                        to the simple hostname
                      type: string
                    primarySegment:
                      description: The site segment the root maps to
                      type: string
                    additionalSegments:
                      description: Additional segments that are available through
                        this hostname
                      items:
                        type: string
                      type: array
                  type: object
                type: array
              with:
                description: Optional special components and configurations
                properties:
                  contentImport:
                    description: "Import content, users, themes and workflows"
                    type: boolean
                  databases:
                    description: Create databases for CoreMedia
                    type: boolean
                  delivery:
                    description: Create default components for the delivery stage
                    properties:
                      rls:
                        description: Number of RLS to create
                        type: integer
                      minCae:
                        description: Minimum number of CAEs per RLS
                        type: integer
                      maxCae:
                        description: Maximum number of CAEs per RLS
                        type: integer
                    type: object
                  management:
                    description: Create default components for the management stage
                    type: boolean
                type: object
              importJob:
                description: Parameters for the content-users and frontend import
                properties:
                  blobServer:
                    description: "URL of the blob-data.zip to be imported, used by\
                      \ 'content-import'"
                    type: boolean
                  contentUsersAuth:
                    description: Secret for authentication for the contentUsersUrl
                    properties:
                      secret:
                        type: string
                      username:
                        type: string
                      password:
                        type: string
                    type: object
                  contentUsersThemesPvc:
                    description: "Volume containing content-users.zip and frontend.zip,\
                      \ used by 'unpack-content-users-frontend'"
                    type: string
                  contentUsersUrl:
                    description: "URL of the content-users.zip to be imported, used\
                      \ by 'use-remote-content-archive'"
                    type: string
                  env:
                    description: Additional environment variables
                    items:
                      properties:
                        name:
                          type: string
                        value:
                          type: string
                        valueFrom:
                          properties:
                            configMapKeyRef:
                              properties:
                                key:
                                  type: string
                                name:
                                  type: string
                                optional:
                                  type: boolean
                              type: object
                            fieldRef:
                              properties:
                                apiVersion:
                                  type: string
                                fieldPath:
                                  type: string
                              type: object
                            resourceFieldRef:
                              properties:
                                containerName:
                                  type: string
                                divisor:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  x-kubernetes-int-or-string: true
                                resource:
                                  type: string
                              type: object
                            secretKeyRef:
                              properties:
                                key:
                                  type: string
                                name:
                                  type: string
                                optional:
                                  type: boolean
                              type: object
                          type: object
                      type: object
                    type: array
                  forceContentImport:
                    description: Force re-import of content and users
                    type: boolean
                  forceThemeImport:
                    description: Force re-import of themes
                    type: boolean
                  tasks:
                    description: List of tasks (entrypoint scripts) to be run by management-tools
                    items:
                      type: string
                    type: array
                  themesAuth:
                    description: Secret for authentication for the frontendUrl
                    properties:
                      secret:
                        type: string
                      username:
                        type: string
                      password:
                        type: string
                    type: object
                  themesUrl:
                    description: "URL of the frontend.zip to be imported, used by\
                      \ 'import-themes'"
                    type: string
                type: object
            type: object
          status:
            properties:
              error:
                description: "Error indication, or empty string"
                type: string
              errorMessage:
                description: Error message if state is error
                type: string
              flags:
                additionalProperties:
                  type: string
                type: object
              milestone:
                description: Which milestone has been reached in configuring all components
                enum:
                - Created
                - DatabasesReady
                - ContentServerReady
                - ManagementReady
                - Ready
                - Never
                - milestone
                type: string
              ownedResourceRefs:
                description: Resources created by the operator
                type: string
              observedGeneration:
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
